rules = """
Learned 99 bidirectional rewrites, and 98 conditional rules (264 total rewrites) in 734.569491917 using 239 prior rewrites
(- (- ?a)) <=> ?a
(- ?a ?a) ==> 0
(/ ?a 1) <=> ?a
(- ?a 0) <=> ?a
(* ?a 1) <=> ?a
(+ 0 ?a) <=> ?a
(* 1 ?a) <=> ?a
(+ ?a 0) <=> ?a
(- ?a) <=> (- 0 ?a)
(* ?a ?b) <=> (* ?b ?a)
(+ ?a ?b) <=> (+ ?b ?a)
(* ?a 0) ==> 0
(/ 0 ?a) ==> 0
(/ ?a 0) ==> 0
(/ ?a ?a) ==> 1 if (istrue (!= ?a 0))
(- ?b ?a) ==> (+ ?b ?b) if (istrue (== 0 (+ ?b ?a)))
(/ ?a ?b) ==> (+ ?a ?a) if (istrue (== ?b (+ ?b ?a)))
(- ?b ?a) ==> (- ?b) if (istrue (== ?b (- ?a ?b)))
(- ?b ?a) ==> (- ?a) if (istrue (== ?a (+ ?a ?b)))
(- ?b ?a) ==> (- ?b) if (istrue (== ?a (+ ?b ?b)))
(- ?a ?b) ==> ?a if (istrue (== ?a (+ ?a ?b)))
(- ?b ?a) ==> ?a if (istrue (== ?b (+ ?a ?a)))
(/ ?b (- ?a)) <=> (- (/ ?b ?a))
(/ (- ?b) ?a) <=> (- (/ ?b ?a))
(/ ?a (- ?a)) <=> (/ (- ?a) ?a)
(- (/ ?a ?a)) <=> (/ (- ?a) ?a)
(- (* ?b ?a)) <=> (* ?a (- ?b))
(- ?b ?a) <=> (- (- ?a ?b))
(/ ?a (- 1)) <=> (- ?a)
(* ?a (- 1)) <=> (- ?a)
(+ ?b ?a) <=> (- ?a (- ?b))
(+ ?a ?a) <=> (- ?a (- ?a))
(+ ?a (- ?a)) ==> 0
(/ (- ?b) ?a) ==> (+ ?a ?a) if (istrue (== ?b (+ ?b ?a)))
(- (* ?b ?a)) ==> (+ ?a ?a) if (istrue (== ?b (+ ?b ?a)))
(/ ?b ?a) ==> (+ ?a ?a) if (istrue (== ?b (+ ?b ?a)))
(* ?b ?a) ==> (+ ?a ?a) if (istrue (== ?b (+ ?b ?a)))
(* ?b (/ 1 ?a)) <=> (/ ?b (/ 1 ?a))
(/ 1 (* ?a ?a)) <=> (/ ?a (/ 1 ?a))
(* ?a (/ 1 ?a)) <=> (/ ?a (/ 1 ?a))
(/ 1 (/ 1 ?a)) <=> (/ 1 ?a)
(+ ?b (* ?b ?a)) <=> (* ?b (+ ?a 1))
(- (* ?b ?a) ?a) <=> (* ?a (- ?b 1))
(+ ?c (- ?b ?a)) <=> (- (+ ?b ?c) ?a)
(+ ?b (- ?b ?a)) <=> (- (+ ?b ?b) ?a)
(/ ?c (* ?b ?a)) <=> (/ (/ ?c ?a) ?b)
(* ?c (* ?b ?a)) <=> (* ?b (* ?c ?a))
(- (- ?c ?b) ?a) <=> (- ?c (+ ?a ?b))
(/ (* ?a ?b) ?a) <=> (* ?b (/ ?a ?a))
(/ (* ?a ?b) ?a) <=> (/ ?b (/ ?a ?a))
(/ ?b (* ?b ?a)) <=> (/ (/ ?b ?a) ?b)
(+ ?c (+ ?b ?a)) <=> (+ ?a (+ ?c ?b))
(/ ?a (* ?b ?a)) <=> (/ (/ ?a ?a) ?b)
(+ ?b (+ ?a ?a)) <=> (+ ?a (+ ?a ?b))
(* ?a (+ 1 1)) <=> (+ ?a ?a)
(* ?b (* ?a ?a)) <=> (* ?a (* ?a ?b))
(/ 1 ?a) <=> (/ ?a (* ?a ?a))
(/ 1 ?a) <=> (/ (/ ?a ?a) ?a)
(/ 1 (/ ?a ?a)) <=> (/ ?a ?a)
(/ 1 (+ ?a ?a)) ==> 0
(/ ?a (+ ?a ?a)) ==> 0
?a <=> (/ ?a (/ ?a ?a))
?a <=> (/ (* ?a ?a) ?a)
?a <=> (* ?a (/ ?a ?a))
(+ ?a (- ?b ?a)) ==> ?b
(- (+ ?b ?a) ?a) ==> ?b
(/ 1 (- 1 ?a)) ==> (/ (+ ?a 1) ?a) if (istrue (< ?a 0))
(/ (- ?a 1) ?a) ==> (/ 1 (+ ?a 1)) if (istrue (< 0 ?a))
(/ (+ ?a 1) ?a) ==> 0 if (istrue (< ?a 0))
(/ (- 1 ?a) ?a) ==> 0 if (istrue (< 0 ?a))
(- ?a (/ ?b ?b)) ==> (- ?a 1) if (istrue (!= ?a (+ ?a ?b)))
(/ 1 (+ ?b ?a)) ==> 0 if (istrue (== ?b (- ?a ?b)))
(/ ?a (+ ?b ?a)) ==> 0 if (istrue (== ?b (+ ?a ?a)))
(/ ?b (+ ?b ?a)) ==> 0 if (istrue (== ?b (- ?a ?b)))
(/ ?b (/ ?b ?a)) ==> ?a if (istrue (== ?a (- ?b ?a)))
(* ?b (/ ?a ?a)) ==> ?b if (istrue (== ?b (- ?a ?b)))
(* ?b (/ ?a ?a)) ==> ?b if (istrue (== ?a (+ ?b ?b)))
(/ ?a -1) <=> (* ?a -1)
("%" ?a 0) ==> 0
("%" 0 ?a) ==> 0
("%" ?a 1) ==> 0
("%" ?a -1) ==> 0
("%" ?a ?a) ==> 0
("%" 1 (* ?a -1)) <=> (/ -1 ("%" 1 ?a))
("%" ("%" 1 ?b) ?a) <=> ("%" ("%" 1 ?a) ?b)
(* ?a (/ -1 ?a)) <=> (/ -1 (* ?a ?a))
("%" -1 (* ?a ?a)) <=> ("%" ("%" -1 ?a) ?a)
("%" ("%" -1 ?b) ?a) <=> ("%" ("%" -1 ?a) ?b)
(/ 1 ("%" 1 ?a)) <=> ("%" 1 ?a)
("%" -1 ?a) <=> (/ 1 ("%" -1 ?a))
("%" (/ ?a ?a) ?a) <=> ("%" 1 ?a)
("%" ?b ("%" -1 ?a)) ==> 0
("%" ?a (* ?a -1)) ==> 0
("%" ?b ("%" 1 ?a)) ==> 0
("%" ?b (/ 1 ?a)) ==> 0
("%" (* ?a -1) ?a) ==> 0
("%" ?a ("%" -1 ?a)) ==> 0
("%" ?b (/ -1 ?a)) ==> 0
("%" (/ 1 ?a) ?a) ==> 0
("%" (/ -1 ?a) ?a) ==> 0
("%" ?a (/ 1 ?a)) ==> 0
("%" ?b (/ ?a ?a)) ==> 0
(/ ("%" ?b ?a) ?a) ==> 0
(* -1 -1) <=> 1
(min ?a ?a) <=> ?a
(max ?a ?a) <=> ?a
(min ?a ?b) <=> (min ?b ?a)
(max ?a ?b) <=> (max ?b ?a)
(min ?a 1) ==> 1 if (istrue (< 0 ?a))
(max ?a 1) ==> ?a if (istrue (< 0 ?a))
(min ?b ?a) ==> ?a if (istrue (== ?b (max ?b ?a)))
(min 1 (max ?a 0)) <=> (max 0 (min ?a 1))
(min ?c (min ?b ?a)) <=> (min ?b (min ?c ?a))
(max ?c (max ?b ?a)) <=> (max ?a (max ?b ?c))
(max 1 (min ?a 0)) ==> 1
(min 0 (max ?a 1)) ==> 0
(min ?b (min ?b ?a)) <=> (min ?b ?a)
(min 0 1) <=> 0
(max ?a (min ?b ?a)) ==> ?a
(min ?b (max ?b ?a)) ==> ?b
(max (min ?b ?a) 1) ==> (min ?b (max ?a 1)) if (istrue (< 0 ?b))
(max ?b (min ?a 1)) ==> (max ?b 1) if (istrue (< 0 (max ?b ?a)))
(min ?c (max ?b ?a)) ==> (max ?b (min ?c ?a)) if (istrue (== (max ?b ?c) ?c))
(min ?b (max ?a 1)) ==> 0 if (istrue (== ?a (+ ?a ?b)))
(max ?b (min ?a 0)) ==> ?b if (istrue (< ?a (+ ?a ?b)))
(min (min ?a ?b) (* ?a ?a)) <=> (min ?a ?b)
(min (* ?a ?a) 0) ==> 0
(min 0 (* ?a ?a)) ==> 0
?a <=> (min ?a (* ?a ?a))
(min (+ ?a ?b) (max ?b ?c)) ==> (min (- ?a ?b) (- ?b ?a)) if (istrue (== 0 (max ?a ?b)))
(min (- ?c ?b) (* ?a ?a)) ==> (min (- ?b ?c) (- ?c ?b)) if (istrue (== ?b (max ?b ?c)))
(min (- ?c ?a) (- ?b ?c)) ==> (min (- ?c ?b) (* ?a ?a)) if (istrue (== (max ?c ?a) ?b))
(min (- ?c ?a) (- ?b ?a)) ==> (min (- ?c ?b) (- ?b ?c)) if (istrue (== ?a (max ?c ?b)))
(min (+ ?b ?c) (+ ?b ?a)) ==> (min (+ ?c ?c) (+ ?a ?a)) if (istrue (== (min ?c ?a) ?b))
(min (- ?c ?a) (* ?b ?b)) ==> (min (- ?a ?c) (- ?b ?a)) if (istrue (== ?c (min ?a ?b)))
(min (- ?b ?c) (- ?b ?a)) ==> (min (- ?c ?a) (- ?a ?c)) if (istrue (== ?b (min ?c ?a)))
(min (- ?b ?a) (- ?a ?c)) ==> (min (- ?a ?b) (* ?a ?a)) if (istrue (== ?b (max ?c ?a)))
(min (- ?c ?b) (- ?b ?a)) ==> (min (- ?a ?b) (* ?b ?b)) if (istrue (== ?a (min ?c ?b)))
(min (- ?a ?b) (* ?a ?a)) ==> (min ?a (* ?b ?a)) if (istrue (== 0 (max ?b ?a)))
(min (min ?a ?c) (* ?b ?b)) ==> (min ?a (- ?b ?a)) if (istrue (== ?a (- ?b ?c)))
(+ ?b ?a) ==> (min (- ?b ?a) (- ?a ?b)) if (istrue (== 0 (max ?b ?a)))
(min (+ ?b ?a) 0) ==> (* ?b ?a) if (istrue (== 0 (min ?b ?a)))
(min (+ ?b ?a) (* ?b ?a)) ==> 0 if (istrue (== 0 (min ?b ?a)))
(min (* ?b ?b) (* ?a ?a)) ==> 0 if (istrue (== 0 (min ?b ?a)))
(min (- ?c ?b) (- ?b ?a)) ==> (- ?a ?b) if (istrue (== (min ?c ?b) ?a))
(min (- ?b ?c) (- ?b ?a)) ==> (- ?b ?c) if (istrue (== ?c (max ?c ?a)))
(min (+ ?b ?c) (+ ?b ?a)) ==> (+ ?b ?b) if (istrue (== (min ?c ?a) ?b))
(min (+ ?b ?c) (+ ?b ?a)) ==> (+ ?a ?c) if (istrue (== ?b (max ?a ?c)))
(min (+ ?c ?c) (+ ?a ?b)) ==> (+ ?a ?a) if (istrue (== (min ?c ?b) ?a))
(min (- ?a ?c) (- ?b ?a)) ==> (- ?a ?b) if (istrue (== (max ?a ?c) ?b))
(min (* ?b ?b) (+ ?a ?a)) ==> 0 if (istrue (== 0 (min ?b ?a)))
(min (+ ?c ?a) (+ ?b ?a)) ==> (+ ?b ?a) if (istrue (== ?c (max ?c ?b)))
(min (- ?b ?c) (- ?b ?a)) ==> 0 if (istrue (== ?b (max ?c ?a)))
(min (+ ?c ?a) (+ ?b ?a)) ==> ?a if (istrue (== 0 (min ?c ?b)))
(min (max ?b ?a) 0) ==> (+ ?a ?a) if (istrue (== ?b (+ ?b ?a)))
(min (* ?b ?a) 0) ==> 0 if (istrue (== 0 (min ?b ?a)))
(min (- ?b ?c) (- ?b ?a)) ==> ?b if (istrue (== 0 (max ?c ?a)))
(min (* ?b ?a) 0) ==> 0 if (istrue (== 0 (max ?b ?a)))
(min (- ?a ?b) (* ?a ?b)) ==> ?a if (istrue (== 0 (max ?a ?b)))
(min (max ?b ?a) 0) ==> 0 if (istrue (== 0 (+ ?b ?a)))
(min (- ?c ?a) (- ?b ?a)) ==> 0 if (istrue (== (min ?c ?b) ?a))
(min (- ?b ?a) 0) ==> (- ?b ?a) if (istrue (== ?a (max ?a ?b)))
(min (+ ?b ?a) (+ ?a ?a)) ==> ?a if (istrue (== 0 (min ?b ?a)))
(min ?b (+ ?a ?a)) ==> 0 if (istrue (== 0 (min ?a ?b)))
(min ?b (+ ?a ?a)) ==> (min ?b ?a) if (istrue (== ?b (+ ?b ?a)))
(min (- ?b ?a) 0) ==> 0 if (istrue (== ?b (max ?b ?a)))
(min (- ?b ?a) 0) ==> ?b if (istrue (== 0 (max ?a ?b)))
(min ?b ?a) ==> (+ ?b ?a) if (istrue (== 0 (max ?b ?a)))
(+ ?b ?a) ==> (max ?b ?a) if (istrue (== 0 (min ?b ?a)))
(min ?b (* ?b ?a)) ==> ?b if (istrue (== ?b (- ?a ?b)))
(min ?b (* ?a ?a)) ==> ?b if (istrue (== ?a (+ ?b ?b)))
(min ?b (* ?a ?a)) ==> ?b if (istrue (== ?b (- ?a ?b)))
(min ?a (* ?b ?a)) ==> ?a if (istrue (== ?b (+ ?a ?a)))
(max 0 (* ?a ?a)) <=> (* ?a ?a)
(max (- ?b ?a) (- ?a ?b)) ==> (max (+ ?b ?a) (* ?b ?a)) if (istrue (== 0 (min ?b ?a)))
(max (+ ?b ?c) (+ ?b ?a)) ==> (max (+ ?c ?c) (+ ?a ?a)) if (istrue (== (max ?c ?a) ?b))
(max (- ?c ?a) (- ?b ?a)) ==> (max (- ?c ?b) (- ?b ?c)) if (istrue (== ?a (min ?c ?b)))
(max (- ?b ?c) (- ?b ?a)) ==> (max (- ?c ?a) (- ?a ?c)) if (istrue (== ?b (max ?c ?a)))
(+ ?b ?a) ==> (max (- ?b ?a) (- ?a ?b)) if (istrue (== 0 (min ?b ?a)))
(max (- ?c ?b) (- ?b ?a)) ==> (- ?b ?c) if (istrue (== ?c (min ?b ?a)))
(max (- ?b ?c) (- ?b ?a)) ==> (- ?b ?a) if (istrue (== ?c (max ?c ?a)))
(max (+ ?b ?c) (+ ?b ?a)) ==> (+ ?a ?c) if (istrue (== ?b (min ?a ?c)))
(max (+ ?b ?c) (+ ?b ?a)) ==> (+ ?b ?b) if (istrue (== ?b (max ?a ?c)))
(max (+ ?c ?c) (+ ?a ?b)) ==> (+ ?a ?a) if (istrue (== (max ?c ?b) ?a))
(max (+ ?c ?b) (+ ?b ?a)) ==> (+ ?c ?b) if (istrue (== ?c (max ?c ?a)))
(max (- ?a ?c) (- ?b ?a)) ==> (- ?c ?a) if (istrue (== ?c (max ?a ?b)))
(max (+ ?b ?a) (+ ?a ?a)) ==> (+ ?b ?a) if (istrue (== ?b (max ?b ?a)))
(max (* ?b ?a) 0) ==> 0 if (istrue (== 0 (max ?b ?a)))
(max (min ?b ?a) 0) ==> 0 if (istrue (== 0 (+ ?b ?a)))
(- ?b ?a) ==> (max (- ?b ?a) 0) if (istrue (== (max ?a ?b) ?b))
(max (- ?c ?a) (- ?b ?a)) ==> 0 if (istrue (== (max ?c ?b) ?a))
(max (- ?b ?c) (- ?b ?a)) ==> ?b if (istrue (== 0 (min ?c ?a)))
(max (- ?b ?c) (- ?b ?a)) ==> 0 if (istrue (== ?b (min ?c ?a)))
(max (+ ?c ?a) (+ ?b ?a)) ==> ?a if (istrue (== 0 (max ?c ?b)))
(max (- ?b ?a) 0) ==> ?b if (istrue (== 0 (min ?a ?b)))
(max ?b (+ ?a ?a)) ==> 0 if (istrue (== 0 (max ?b ?a)))
(max (- ?b ?a) 0) ==> 0 if (istrue (== ?a (max ?a ?b)))
"""

for line in rules.splitlines():
    if "istrue" in line:
        # here, we want to remove the (istrue in the middle.
        line = line.replace("(istrue ", "")
        # and the closing parenthesis at the end.
    
    print(line)

