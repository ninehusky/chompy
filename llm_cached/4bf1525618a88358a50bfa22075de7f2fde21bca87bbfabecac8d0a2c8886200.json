{
  "prompt": "\nYou are the worldâ€™s leading expert in program optimization and algebraic reasoning.\nYou are helping organize rewrite rules for use in an equality saturation system.\n\nYou will be given a batch of valid candidate rewrite rules.\n\nYour goal:\n  - Group the rules into semantic categories according to what they do.\n  - If a rule produces a RHS that is **structurally smaller than the LHS** (fewer operators, less nesting), place it in its own category.\n  - If a rule produces a RHS that is **more canonical or normalized** (terms reordered into standard order, consistent structure), place it in its own category.\n  - If a rule produces a RHS that is **more balanced or symmetric** than the LHS, place it in its own category.\n  - Do not lump simplifications with rules that merely reshuffle or perform minor transformations.\n  - Single out important rewrite patterns like idempotency, distributivity, or constant simplifications: they should always get their own category, even if there are only one or two rules of that type.\n  - Do not group rules together just because they use the same operators; create new categories for meaningful semantic differences.\n  - Place each rule under exactly one category.\n  - Remove rules which just look like noise.\n  - Strive to capture semantic differences clearly, even if that results in more categories than before.\n  - Avoid redundant categories; rules that are semantically similar should be grouped together.\n\nFormat your output like this:\n\nCategory: <brief description of transformation>\n<rule 1>\n<rule 2>\n...\n\nCategory: <next transformation>\n<rule 1>\n<rule 2>\n...\n\nDo not output numeric hints, explanations, or any other text. Only output the categories and rules.\n\nExample Input:\n(+ (* ?a 1) ?b) ==> (+ ?b (* ?a 1))\n(/ ?a ?a) ==> 1 if (!= ?a 0)\n(+ ?a (+ ?b ?c)) ==> (+ ?a (+ ?c ?b))\n(min ?a (+ ?a ?b)) ==> (+ ?a ?b) if (< ?b 0)\n(+ (+ ?a ?b) (* ?c 1)) ==> (+ (* ?c 1) (+ ?b ?a))\n(max (+ ?a ?b) ?c) ==> (max (+ ?b ?a) ?c)\n(< ?a (+ ?a ?b)) ==> (< ?a (+ ?b ?a))\n(* ?a (* ?b ?c)) ==> (* ?a (* ?c ?b))\n(+ (+ ?a ?b) (+ ?c ?d)) ==> (+ (+ ?b ?a) (+ ?d ?c))\n(< (?a (+ ?b ?c))) ==> (< ?a (+ ?c ?b)) if (!= ?b 0)\n(min ?a ?b) ==> ?a if (< ?a ?b)\n(* (* ?a ?b) ?c) ==> (* (* ?b ?a) ?c)\n(< (+ ?a ?b) (+ ?b ?a)) ==> 0 if (== ?a ?b)\n(min (+ ?a ?b) ?c) ==> (+ ?a (min ?b ?c)) if (< ?a ?c)\n(+ ?a (* ?b 0)) ==> ?a if (>= ?b 0)\n(+ ?a (+ ?b ?c)) ==> (+ ?b (+ ?a ?c))\n(< (+ ?a ?b) (+ ?b ?a)) ==> (< (+ ?b ?a) (+ ?a ?b))\n(/ ?a ?a) ==> 1 if (> ?a 0)\n(min ?a (+ ?b ?c)) ==> (min (+ ?c ?b) ?a)\n(* ?a (+ ?b ?c)) ==> (+ (* ?a ?b) (* ?a ?c)) if (>= ?a 0)\n(+ (+ ?a ?b) ?c) ==> (+ (+ ?b ?a) ?c)\n(min ?a (+ ?b ?c)) ==> (min ?a (+ ?c ?b))\n\nExample Output (Good):\nCategory: Simplifications for Division\n(/ ?a ?a) ==> 1 if (!= ?a 0)\n(/ ?a ?a) ==> 1 if (> ?a 0)\n\nCategory: Simplifications for Min\n(min ?a ?b) ==> ?a if (< ?a ?b)\n(min ?a (+ ?a ?b)) ==> (+ ?a ?b) if (< ?b 0)\n\nCategory: Constant Multiplication and Addition Simplifications\n(+ ?a (* ?b 0)) ==> ?a if (>= ?b 0)\n(+ (* ?a 1) ?b) ==> (+ ?b (* ?a 1))\n(+ (+ ?a ?b) (* ?c 1)) ==> (+ (* ?c 1) (+ ?b ?a))\n\nCategory: Commutativity and Argument Shuffling\n(+ ?a (+ ?b ?c)) ==> (+ ?a (+ ?c ?b))\n(+ ?a (+ ?b ?c)) ==> (+ ?b (+ ?a ?c))\n(* ?a (* ?b ?c)) ==> (* ?a (* ?c ?b))\n(* (* ?a ?b) ?c) ==> (* (* ?b ?a) ?c)\n(+ (+ ?a ?b) (+ ?c ?d)) ==> (+ (+ ?b ?a) (+ ?d ?c))\n(+ (+ ?a ?b) ?c) ==> (+ (+ ?b ?a) ?c)\n(max (+ ?a ?b) ?c) ==> (max (+ ?b ?a) ?c)\n\nCategory: Inequality Shuffles\n(< ?a (+ ?a ?b)) ==> (< ?a (+ ?b ?a))\n(< (+ ?a ?b) (+ ?b ?a)) ==> (< (+ ?b ?a) (+ ?a ?b))\n(< (+ ?a ?b) (+ ?b ?a)) ==> 0 if (== ?a ?b)\n(< (?a (+ ?b ?c))) ==> (< ?a (+ ?c ?b)) if (!= ?b 0)\n\nCategory: Min/Max Transformations\n(min (+ ?a ?b) ?c) ==> (+ ?a (min ?b ?c)) if (< ?a ?c)\n(min ?a (+ ?b ?c)) ==> (min (+ ?c ?b) ?a)\n(min ?a (+ ?b ?c)) ==> (min ?a (+ ?c ?b))\n\nCategory: Distributivity of Multiplication over Addition\n(* ?a (+ ?b ?c)) ==> (+ (* ?a ?b) (* ?a ?c)) if (>= ?a 0)\n\nCategory: Canonicalization / Reordering\n(+ ?a (+ ?b ?c)) ==> (+ ?a (+ ?c ?b))\n(+ ?a (+ ?b ?c)) ==> (+ ?b (+ ?a ?c))\n(max (+ ?a ?b) ?c) ==> (max (+ ?b ?a) ?c)\n\nCategory: Structural Simplifications\n(min ?a (+ ?a ?b)) ==> (+ ?a ?b) if (< ?b 0)\n(/ ?a ?a) ==> 1 if (!= ?a 0)\n(+ ?a (* ?b 0)) ==> ?a if (>= ?b 0)\n\nCategory: Balanced / Symmetric Transformations\n(+ (+ ?a ?b) (+ ?c ?d)) ==> (+ (+ ?b ?a) (+ ?d ?c))\n(+ (+ ?a ?b) ?c) ==> (+ (+ ?b ?a) ?c)\n\nInput:\n(/ (max ?b ?c) (/ ?a ?a)) ==> (max ?c (/ ?b (/ ?a ?a))) if (<= ?c 0)\n(min ?c (max ?b (/ ?a ?a))) ==> (min ?c (/ (/ ?a ?a) ?c)) if (<= ?c 0)\n(min ?b (max ?c (/ ?c ?a))) ==> (min ?b (/ (min ?c ?b) ?a)) if (<= ?c 0)\n(min ?b (/ (min ?c ?b) ?a)) ==> (min ?b (max ?c (/ ?c ?a))) if (<= ?c 0)\n(/ (min ?c (/ ?c ?b)) ?a) ==> (/ (min ?c (/ ?a ?c)) ?a) if (<= ?c 0)\n(min ?b (/ ?a (min ?a ?c))) ==> (min ?b (/ (/ ?a ?b) ?a)) if (<= ?a 0)\n(max ?c (/ (max ?a ?b) ?a)) ==> (max ?c (/ ?b (min ?a ?b))) if (< ?a 0)\n(max ?c (/ ?b (min ?a ?b))) ==> (max ?c (/ (max ?a ?b) ?a)) if (< ?a 0)\n(/ ?b (min ?c (max ?b ?a))) ==> (/ (min ?b ?a) (min ?c ?a)) if (< ?b 0)\n(/ (min ?b ?a) (min ?c ?a)) ==> (/ ?b (min ?c (max ?b ?a))) if (< ?b 0)\n(max (/ ?a ?a) (min ?c ?b)) ==> (/ (/ ?b ?a) (/ ?b ?a)) if (< ?b 0)\n(/ (max ?b ?c) (min ?c ?a)) ==> (/ ?b (min ?c (min ?b ?a))) if (< ?c 0)\n(/ ?b (min ?c (min ?b ?a))) ==> (/ (max ?b ?c) (min ?c ?a)) if (< ?c 0)\n(/ (max ?a (min ?c ?b)) ?a) ==> (/ (/ ?c ?a) (/ ?c ?a)) if (< ?c 0)\n(/ (max ?a (min ?c ?b)) ?a) ==> (/ (max ?a ?b) (max ?a ?b)) if (< ?b 0)\n(min ?c (/ ?b (min ?b ?a))) ==> (min ?c (/ ?c (max ?b ?c))) if (< ?b 0)\n(max (/ ?c ?c) (min ?b ?a)) ==> (/ (max ?c ?a) (max ?c ?a)) if (< ?a 0)\n(max (/ ?b ?b) (/ ?a ?a)) ==> 1 if (!= ?b ?a)\n(/ (max ?a (/ ?b ?b)) ?a) ==> (/ ?a ?a) if (<= 0 ?a)\n(/ ?b (max ?b (/ ?a ?a))) ==> (/ ?b ?b) if (<= 0 ?b)\n",
  "model": "gpt-4o",
  "response": "Category: Simplifications for Division\n(max (/ ?b ?b) (/ ?a ?a)) ==> 1 if (!= ?b ?a)\n(/ ?b (max ?b (/ ?a ?a))) ==> (/ ?b ?b) if (<= 0 ?b)\n(/ (max ?a (/ ?b ?b)) ?a) ==> (/ ?a ?a) if (<= 0 ?a)\n\nCategory: Min/Max Transformations with Division\n(min ?b (max ?c (/ ?c ?a))) ==> (min ?b (/ (min ?c ?b) ?a)) if (<= ?c 0)\n(min ?b (/ (min ?c ?b) ?a)) ==> (min ?b (max ?c (/ ?c ?a))) if (<= ?c 0)\n(max ?c (/ (max ?a ?b) ?a)) ==> (max ?c (/ ?b (min ?a ?b))) if (< ?a 0)\n(max ?c (/ ?b (min ?a ?b))) ==> (max ?c (/ (max ?a ?b) ?a)) if (< ?a 0)\n(/ (max ?b ?c) (min ?c ?a)) ==> (/ ?b (min ?c (min ?b ?a))) if (< ?c 0)\n(/ ?b (min ?c (min ?b ?a))) ==> (/ (max ?b ?c) (min ?c ?a)) if (< ?c 0)\n\nCategory: Nested Min/Max with Division\n(/ (max ?b ?c) (/ ?a ?a)) ==> (max ?c (/ ?b (/ ?a ?a))) if (<= ?c 0)\n(min ?c (max ?b (/ ?a ?a))) ==> (min ?c (/ (/ ?a ?a) ?c)) if (<= ?c 0)\n(/ (min ?c (/ ?c ?b)) ?a) ==> (/ (min ?c (/ ?a ?c)) ?a) if (<= ?c 0)\n(min ?b (/ ?a (min ?a ?c))) ==> (min ?b (/ (/ ?a ?b) ?a)) if (<= ?a 0)\n(/ ?b (min ?c (max ?b ?a))) ==> (/ (min ?b ?a) (min ?c ?a)) if (< ?b 0)\n(/ (min ?b ?a) (min ?c ?a)) ==> (/ ?b (min ?c (max ?b ?a))) if (< ?b 0)\n\nCategory: Symmetric Division Transformations\n(max (/ ?c ?c) (min ?b ?a)) ==> (/ (max ?c ?a) (max ?c ?a)) if (< ?a 0)\n(/ (max ?a (min ?c ?b)) ?a) ==> (/ (/ ?c ?a) (/ ?c ?a)) if (< ?c 0)\n(/ (max ?a (min ?c ?b)) ?a) ==> (/ (max ?a ?b) (max ?a ?b)) if (< ?b 0)\n(min ?c (/ ?b (min ?b ?a))) ==> (min ?c (/ ?c (max ?b ?c))) if (< ?b 0)"
}